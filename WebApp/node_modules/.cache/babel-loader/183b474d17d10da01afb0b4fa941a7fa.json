{"ast":null,"code":"import _classCallCheck from\"/home/asitha/Documents/Mobile Apps/elly/WebApp/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/asitha/Documents/Mobile Apps/elly/WebApp/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/home/asitha/Documents/Mobile Apps/elly/WebApp/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/home/asitha/Documents/Mobile Apps/elly/WebApp/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/home/asitha/Documents/Mobile Apps/elly/WebApp/node_modules/@babel/runtime/helpers/esm/inherits\";import React from\"react\";import{generateResult}from\"../../firebase/dataHandling\";import ReviewCard from\"../../components/ReviewCard/ReviewCard\";import firebase from\"firebase/app\";import ObservationDialog from\"../../components/ObservationDialog/ObservationDialog\";import{Typography,Grid,Container}from\"@material-ui/core\";var Pending=/*#__PURE__*/function(_React$Component){_inherits(Pending,_React$Component);function Pending(props){var _this;_classCallCheck(this,Pending);_this=_possibleConstructorReturn(this,_getPrototypeOf(Pending).call(this,props));_this.reviewCard=function(child){_this.setState({showModal:child[0],item:child[1]});};_this.observationDialog=function(child){console.log(child);_this.setState({item:child});};_this.handleClose=function(){_this.setState({showModal:false});};_this.state={observations:[],month:[],showModal:false,item:0};return _this;}_createClass(Pending,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;firebase.database().ref(\"usersObservations\").orderByKey().on(\"value\",function(snapshot){var result=snapshot.val();var observations=[];for(var i in result){console.log(result[i].verified);if(result[i].verified!==\"pending\"){continue;}var user=result[i].uname;var uid=result[i].uid;var userPhoto=result[i].uimg;var obPhoto=result[i].photoURL;var time=new Date(result[i].time);time=time.toString().split(\" \");time=time.splice(0,time.length-4);time=time.toString().replace(/,/g,\" \");var results=generateResult(result[i]);observations.push([user,userPhoto,obPhoto,time,results,i,uid]);_this2.setState({observations:observations});}console.log(observations);});}},{key:\"render\",value:function render(){var _this3=this;return React.createElement(Container,{style:{marginTop:60}},React.createElement(Typography,{variant:\"h5\",component:\"h5\"},\"Pending Observations\"),React.createElement(Grid,{container:true,spacing:1},this.state.observations.map(function(ob,i){var component=[];if(i===0||_this3.state.observations[i-1][3].split(\" \")[1]!==ob[3].split(\" \")[1]){component.push(React.createElement(Grid,{item:true,xs:12,key:i+_this3.state.observations.length},React.createElement(Typography,{variant:\"h6\",component:\"h6\",style:{display:\"block\",width:\"100%\",marginTop:\"20px\"}},ob[3].split(\" \")[3]+\" \"+ob[3].split(\" \")[1])));}component.push(React.createElement(Grid,{item:true,xs:4},React.createElement(ReviewCard,{verified:false,userId:ob[6],id:ob[5],user:ob[0],userPhoto:ob[1],obPhoto:ob[2],time:ob[3],result:ob[4],key:i,index:i,parentCallback:_this3.reviewCard})));return component;})),this.state.observations.length>0?React.createElement(ObservationDialog,{userPhoto:this.state.observations[this.state.item][1],user:this.state.observations[this.state.item][0],time:this.state.observations[this.state.item][3],verified:false,userId:this.state.observations[this.state.item][6],id:this.state.observations[this.state.item][5],img:this.state.observations[this.state.item][2],result:this.state.observations[this.state.item][4],open:this.state.showModal,onClose:this.handleClose,index:this.state.item,parentCallback:this.observationDialog,max:this.state.observations.length}):null);}}]);return Pending;}(React.Component);export default Pending;","map":{"version":3,"sources":["/home/asitha/Documents/Mobile Apps/elly/WebApp/src/containers/pending/Pending.js"],"names":["React","generateResult","ReviewCard","firebase","ObservationDialog","Typography","Grid","Container","Pending","props","reviewCard","child","setState","showModal","item","observationDialog","console","log","handleClose","state","observations","month","database","ref","orderByKey","on","snapshot","result","val","i","verified","user","uname","uid","userPhoto","uimg","obPhoto","photoURL","time","Date","toString","split","splice","length","replace","results","push","marginTop","map","ob","component","display","width","Component"],"mappings":"mpBAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,cAAT,KAA+B,6BAA/B,CACA,MAAOC,CAAAA,UAAP,KAAuB,wCAAvB,CACA,MAAOC,CAAAA,QAAP,KAAqB,cAArB,CAEA,MAAOC,CAAAA,iBAAP,KAA8B,sDAA9B,CACA,OAASC,UAAT,CAAqBC,IAArB,CAA2BC,SAA3B,KAA4C,mBAA5C,C,GACMC,CAAAA,O,6EACJ,iBAAYC,KAAZ,CAAmB,yCACjB,yEAAMA,KAAN,GADiB,MAsCnBC,UAtCmB,CAsCN,SAAAC,KAAK,CAAI,CACpB,MAAKC,QAAL,CAAc,CACZC,SAAS,CAAEF,KAAK,CAAC,CAAD,CADJ,CAEZG,IAAI,CAAEH,KAAK,CAAC,CAAD,CAFC,CAAd,EAID,CA3CkB,OA6CnBI,iBA7CmB,CA6CC,SAAAJ,KAAK,CAAI,CAC3BK,OAAO,CAACC,GAAR,CAAYN,KAAZ,EACA,MAAKC,QAAL,CAAc,CACZE,IAAI,CAAEH,KADM,CAAd,EAGD,CAlDkB,OAoDnBO,WApDmB,CAoDL,UAAM,CAClB,MAAKN,QAAL,CAAc,CACZC,SAAS,CAAE,KADC,CAAd,EAGD,CAxDkB,CAEjB,MAAKM,KAAL,CAAa,CACXC,YAAY,CAAE,EADH,CAEXC,KAAK,CAAE,EAFI,CAGXR,SAAS,CAAE,KAHA,CAIXC,IAAI,CAAE,CAJK,CAAb,CAFiB,aAQlB,C,iFACmB,iBAClBX,QAAQ,CACLmB,QADH,GAEGC,GAFH,CAEO,mBAFP,EAGGC,UAHH,GAIGC,EAJH,CAIM,OAJN,CAIe,SAAAC,QAAQ,CAAI,CACvB,GAAMC,CAAAA,MAAM,CAAGD,QAAQ,CAACE,GAAT,EAAf,CACA,GAAIR,CAAAA,YAAY,CAAG,EAAnB,CACA,IAAK,GAAIS,CAAAA,CAAT,GAAcF,CAAAA,MAAd,CAAsB,CACpBX,OAAO,CAACC,GAAR,CAAYU,MAAM,CAACE,CAAD,CAAN,CAAUC,QAAtB,EACA,GAAIH,MAAM,CAACE,CAAD,CAAN,CAAUC,QAAV,GAAuB,SAA3B,CAAsC,CACpC,SACD,CACD,GAAIC,CAAAA,IAAI,CAAGJ,MAAM,CAACE,CAAD,CAAN,CAAUG,KAArB,CACA,GAAIC,CAAAA,GAAG,CAAGN,MAAM,CAACE,CAAD,CAAN,CAAUI,GAApB,CACA,GAAIC,CAAAA,SAAS,CAAGP,MAAM,CAACE,CAAD,CAAN,CAAUM,IAA1B,CACA,GAAIC,CAAAA,OAAO,CAAGT,MAAM,CAACE,CAAD,CAAN,CAAUQ,QAAxB,CACA,GAAIC,CAAAA,IAAI,CAAG,GAAIC,CAAAA,IAAJ,CAASZ,MAAM,CAACE,CAAD,CAAN,CAAUS,IAAnB,CAAX,CACAA,IAAI,CAAGA,IAAI,CAACE,QAAL,GAAgBC,KAAhB,CAAsB,GAAtB,CAAP,CACAH,IAAI,CAAGA,IAAI,CAACI,MAAL,CAAY,CAAZ,CAAeJ,IAAI,CAACK,MAAL,CAAc,CAA7B,CAAP,CACAL,IAAI,CAAGA,IAAI,CAACE,QAAL,GAAgBI,OAAhB,CAAwB,IAAxB,CAA8B,GAA9B,CAAP,CACA,GAAIC,CAAAA,OAAO,CAAG5C,cAAc,CAAC0B,MAAM,CAACE,CAAD,CAAP,CAA5B,CACAT,YAAY,CAAC0B,IAAb,CAAkB,CAACf,IAAD,CAAOG,SAAP,CAAkBE,OAAlB,CAA2BE,IAA3B,CAAiCO,OAAjC,CAA0ChB,CAA1C,CAA6CI,GAA7C,CAAlB,EACA,MAAI,CAACrB,QAAL,CAAc,CAAEQ,YAAY,CAAEA,YAAhB,CAAd,EACD,CACDJ,OAAO,CAACC,GAAR,CAAYG,YAAZ,EACD,CAzBH,EA0BD,C,uCAqBQ,iBACP,MACE,qBAAC,SAAD,EAAW,KAAK,CAAE,CAAE2B,SAAS,CAAE,EAAb,CAAlB,EACE,oBAAC,UAAD,EAAY,OAAO,CAAC,IAApB,CAAyB,SAAS,CAAC,IAAnC,yBADF,CAKE,oBAAC,IAAD,EAAM,SAAS,KAAf,CAAgB,OAAO,CAAE,CAAzB,EACG,KAAK5B,KAAL,CAAWC,YAAX,CAAwB4B,GAAxB,CAA4B,SAACC,EAAD,CAAKpB,CAAL,CAAW,CACtC,GAAIqB,CAAAA,SAAS,CAAG,EAAhB,CACA,GACErB,CAAC,GAAK,CAAN,EACA,MAAI,CAACV,KAAL,CAAWC,YAAX,CAAwBS,CAAC,CAAG,CAA5B,EAA+B,CAA/B,EAAkCY,KAAlC,CAAwC,GAAxC,EAA6C,CAA7C,IACEQ,EAAE,CAAC,CAAD,CAAF,CAAMR,KAAN,CAAY,GAAZ,EAAiB,CAAjB,CAHJ,CAIE,CACAS,SAAS,CAACJ,IAAV,CACE,oBAAC,IAAD,EAAM,IAAI,KAAV,CAAW,EAAE,CAAE,EAAf,CAAmB,GAAG,CAAEjB,CAAC,CAAG,MAAI,CAACV,KAAL,CAAWC,YAAX,CAAwBuB,MAApD,EACE,oBAAC,UAAD,EACE,OAAO,CAAC,IADV,CAEE,SAAS,CAAC,IAFZ,CAGE,KAAK,CAAE,CACLQ,OAAO,CAAE,OADJ,CAELC,KAAK,CAAE,MAFF,CAGLL,SAAS,CAAE,MAHN,CAHT,EASGE,EAAE,CAAC,CAAD,CAAF,CAAMR,KAAN,CAAY,GAAZ,EAAiB,CAAjB,EAAsB,GAAtB,CAA4BQ,EAAE,CAAC,CAAD,CAAF,CAAMR,KAAN,CAAY,GAAZ,EAAiB,CAAjB,CAT/B,CADF,CADF,EAeD,CACDS,SAAS,CAACJ,IAAV,CACE,oBAAC,IAAD,EAAM,IAAI,KAAV,CAAW,EAAE,CAAE,CAAf,EACE,oBAAC,UAAD,EACE,QAAQ,CAAE,KADZ,CAEE,MAAM,CAAEG,EAAE,CAAC,CAAD,CAFZ,CAGE,EAAE,CAAEA,EAAE,CAAC,CAAD,CAHR,CAIE,IAAI,CAAEA,EAAE,CAAC,CAAD,CAJV,CAKE,SAAS,CAAEA,EAAE,CAAC,CAAD,CALf,CAME,OAAO,CAAEA,EAAE,CAAC,CAAD,CANb,CAOE,IAAI,CAAEA,EAAE,CAAC,CAAD,CAPV,CAQE,MAAM,CAAEA,EAAE,CAAC,CAAD,CARZ,CASE,GAAG,CAAEpB,CATP,CAUE,KAAK,CAAEA,CAVT,CAWE,cAAc,CAAE,MAAI,CAACnB,UAXvB,EADF,CADF,EAiBA,MAAOwC,CAAAA,SAAP,CACD,CAzCA,CADH,CALF,CAiDG,KAAK/B,KAAL,CAAWC,YAAX,CAAwBuB,MAAxB,CAAiC,CAAjC,CACC,oBAAC,iBAAD,EACE,SAAS,CAAE,KAAKxB,KAAL,CAAWC,YAAX,CAAwB,KAAKD,KAAL,CAAWL,IAAnC,EAAyC,CAAzC,CADb,CAEE,IAAI,CAAE,KAAKK,KAAL,CAAWC,YAAX,CAAwB,KAAKD,KAAL,CAAWL,IAAnC,EAAyC,CAAzC,CAFR,CAGE,IAAI,CAAE,KAAKK,KAAL,CAAWC,YAAX,CAAwB,KAAKD,KAAL,CAAWL,IAAnC,EAAyC,CAAzC,CAHR,CAIE,QAAQ,CAAE,KAJZ,CAKE,MAAM,CAAE,KAAKK,KAAL,CAAWC,YAAX,CAAwB,KAAKD,KAAL,CAAWL,IAAnC,EAAyC,CAAzC,CALV,CAME,EAAE,CAAE,KAAKK,KAAL,CAAWC,YAAX,CAAwB,KAAKD,KAAL,CAAWL,IAAnC,EAAyC,CAAzC,CANN,CAOE,GAAG,CAAE,KAAKK,KAAL,CAAWC,YAAX,CAAwB,KAAKD,KAAL,CAAWL,IAAnC,EAAyC,CAAzC,CAPP,CAQE,MAAM,CAAE,KAAKK,KAAL,CAAWC,YAAX,CAAwB,KAAKD,KAAL,CAAWL,IAAnC,EAAyC,CAAzC,CARV,CASE,IAAI,CAAE,KAAKK,KAAL,CAAWN,SATnB,CAUE,OAAO,CAAE,KAAKK,WAVhB,CAWE,KAAK,CAAE,KAAKC,KAAL,CAAWL,IAXpB,CAYE,cAAc,CAAE,KAAKC,iBAZvB,CAaE,GAAG,CAAE,KAAKI,KAAL,CAAWC,YAAX,CAAwBuB,MAb/B,EADD,CAgBG,IAjEN,CADF,CAqED,C,qBAhImB3C,KAAK,CAACqD,S,EAmI5B,cAAe7C,CAAAA,OAAf","sourcesContent":["import React from \"react\";\nimport { generateResult } from \"../../firebase/dataHandling\";\nimport ReviewCard from \"../../components/ReviewCard/ReviewCard\";\nimport firebase from \"firebase/app\";\n\nimport ObservationDialog from \"../../components/ObservationDialog/ObservationDialog\";\nimport { Typography, Grid, Container } from \"@material-ui/core\";\nclass Pending extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      observations: [],\n      month: [],\n      showModal: false,\n      item: 0\n    };\n  }\n  componentDidMount() {\n    firebase\n      .database()\n      .ref(\"usersObservations\")\n      .orderByKey()\n      .on(\"value\", snapshot => {\n        const result = snapshot.val();\n        let observations = [];\n        for (let i in result) {\n          console.log(result[i].verified);\n          if (result[i].verified !== \"pending\") {\n            continue;\n          }\n          let user = result[i].uname;\n          let uid = result[i].uid;\n          let userPhoto = result[i].uimg;\n          let obPhoto = result[i].photoURL;\n          let time = new Date(result[i].time);\n          time = time.toString().split(\" \");\n          time = time.splice(0, time.length - 4);\n          time = time.toString().replace(/,/g, \" \");\n          let results = generateResult(result[i]);\n          observations.push([user, userPhoto, obPhoto, time, results, i, uid]);\n          this.setState({ observations: observations });\n        }\n        console.log(observations);\n      });\n  }\n\n  reviewCard = child => {\n    this.setState({\n      showModal: child[0],\n      item: child[1]\n    });\n  };\n\n  observationDialog = child => {\n    console.log(child);\n    this.setState({\n      item: child\n    });\n  };\n\n  handleClose = () => {\n    this.setState({\n      showModal: false\n    });\n  };\n  render() {\n    return (\n      <Container style={{ marginTop: 60 }}>\n        <Typography variant=\"h5\" component=\"h5\">\n          Pending Observations\n        </Typography>\n\n        <Grid container spacing={1}>\n          {this.state.observations.map((ob, i) => {\n            let component = [];\n            if (\n              i === 0 ||\n              this.state.observations[i - 1][3].split(\" \")[1] !==\n                ob[3].split(\" \")[1]\n            ) {\n              component.push(\n                <Grid item xs={12} key={i + this.state.observations.length}>\n                  <Typography\n                    variant=\"h6\"\n                    component=\"h6\"\n                    style={{\n                      display: \"block\",\n                      width: \"100%\",\n                      marginTop: \"20px\"\n                    }}\n                  >\n                    {ob[3].split(\" \")[3] + \" \" + ob[3].split(\" \")[1]}\n                  </Typography>\n                </Grid>\n              );\n            }\n            component.push(\n              <Grid item xs={4}>\n                <ReviewCard\n                  verified={false}\n                  userId={ob[6]}\n                  id={ob[5]}\n                  user={ob[0]}\n                  userPhoto={ob[1]}\n                  obPhoto={ob[2]}\n                  time={ob[3]}\n                  result={ob[4]}\n                  key={i}\n                  index={i}\n                  parentCallback={this.reviewCard}\n                />\n              </Grid>\n            );\n            return component;\n          })}\n        </Grid>\n        {this.state.observations.length > 0 ? (\n          <ObservationDialog\n            userPhoto={this.state.observations[this.state.item][1]}\n            user={this.state.observations[this.state.item][0]}\n            time={this.state.observations[this.state.item][3]}\n            verified={false}\n            userId={this.state.observations[this.state.item][6]}\n            id={this.state.observations[this.state.item][5]}\n            img={this.state.observations[this.state.item][2]}\n            result={this.state.observations[this.state.item][4]}\n            open={this.state.showModal}\n            onClose={this.handleClose}\n            index={this.state.item}\n            parentCallback={this.observationDialog}\n            max={this.state.observations.length}\n          />\n        ) : null}\n      </Container>\n    );\n  }\n}\n\nexport default Pending;\n"]},"metadata":{},"sourceType":"module"}