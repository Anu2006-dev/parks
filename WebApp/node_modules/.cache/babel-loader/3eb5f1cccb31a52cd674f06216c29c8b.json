{"ast":null,"code":"var _jsxFileName = \"/home/asitha/Documents/Mobile Apps/elly/WebApp/src/containers/login/LoginPage.js\";\nimport React from 'react';\nimport Avatar from '@material-ui/core/Avatar';\nimport Button from '@material-ui/core/Button';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport TextField from '@material-ui/core/TextField';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined';\nimport Typography from '@material-ui/core/Typography';\nimport Container from '@material-ui/core/Container';\nimport { auth } from '../../firebase';\nimport { Redirect } from 'react-router-dom';\n\nvar firebase = require(\"firebase\");\n\nvar sectionStyle = {\n  width: \"100%\",\n  backgroundPosition: \"center\",\n  backgroundRepeat: \"no-repeat\"\n};\n\nclass Login extends React.Component {\n  constructor() {\n    super();\n\n    this.onEmailChange = e => {\n      this.setState({\n        email: e.target.value\n      });\n    };\n\n    this.onPasswordChange = e => {\n      this.setState({\n        password: e.target.value\n      });\n    };\n\n    this.onSubmit = e => {\n      e.preventDefault();\n      this.handleSubmit({\n        email: this.state.email,\n        password: this.state.password\n      }).catch(err => {\n        this.setState({\n          err: err.message\n        });\n      });\n    };\n\n    this.handleSubmit = ({\n      email,\n      password\n    }) => {\n      return auth.doSignInWithEmailAndPassword(email, password).then(response => {\n        console.log('Successful Sign In');\n        const uid = JSON.parse(JSON.stringify(response)).user.uid;\n        console.log(JSON.parse(JSON.stringify(response)).user);\n        firebase.database().ref().child('users').child(uid).child('profile').once(\"value\").then(snapshot => {\n          const result = snapshot.val();\n          console.log(result);\n\n          if (result !== 'admin') {\n            this.setState({\n              err: \"This account does not have admin priviledges\"\n            });\n          } else {\n            this.setState({\n              userFound: true\n            });\n          }\n        });\n      }).catch(err => {\n        console.log('Failed Sign In', err);\n        this.setState({\n          err: err.message\n        });\n        throw err;\n      });\n    };\n\n    this.state = {\n      email: '',\n      password: '',\n      err: '',\n      userFound: false\n    };\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      style: sectionStyle,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }, this.state.userFound ? React.createElement(Redirect, {\n      to: \"/home/approved\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    }) : null, React.createElement(Container, {\n      style: {\n        padding: 10\n      },\n      component: \"main\",\n      maxWidth: \"xs\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    }, React.createElement(CssBaseline, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      style: {\n        display: 'flex',\n        alignItems: 'center',\n        height: '100vh'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      noValidate: true,\n      onSubmit: this.onSubmit,\n      style: {\n        backgroundColor: 'rgba(247, 247, 247, 0.8)',\n        borderRadius: \"25px\",\n        padding: \"20px\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      style: {\n        alignItems: 'center'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    }, React.createElement(Avatar, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }, React.createElement(LockOutlinedIcon, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    })), React.createElement(Typography, {\n      component: \"h1\",\n      variant: \"h5\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }, \"Sign in\")), React.createElement(TextField, {\n      variant: \"outlined\",\n      margin: \"normal\",\n      required: true,\n      fullWidth: true,\n      id: \"email\",\n      label: \"Email Address\",\n      name: \"email\",\n      autoComplete: \"email\",\n      autoFocus: true,\n      value: this.state.email,\n      onChange: this.onEmailChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }), React.createElement(Typography, {\n      color: \"error\",\n      variant: \"caption\",\n      display: \"block\",\n      gutterBottom: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }, this.state.err), React.createElement(TextField, {\n      variant: \"outlined\",\n      margin: \"normal\",\n      required: true,\n      fullWidth: true,\n      name: \"password\",\n      label: \"Password\",\n      type: \"password\",\n      id: \"password\",\n      autoComplete: \"current-password\",\n      value: this.state.password,\n      onChange: this.onPasswordChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }), React.createElement(FormControlLabel, {\n      control: React.createElement(Checkbox, {\n        value: \"remember\",\n        color: \"primary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121\n        },\n        __self: this\n      }),\n      label: \"Remember me\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }), React.createElement(Button, {\n      type: \"submit\",\n      variant: \"contained\",\n      color: \"primary\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }, \"Sign In\")))));\n  }\n\n}\n\nexport default Login;","map":{"version":3,"sources":["/home/asitha/Documents/Mobile Apps/elly/WebApp/src/containers/login/LoginPage.js"],"names":["React","Avatar","Button","CssBaseline","TextField","FormControlLabel","Checkbox","LockOutlinedIcon","Typography","Container","auth","Redirect","firebase","require","sectionStyle","width","backgroundPosition","backgroundRepeat","Login","Component","constructor","onEmailChange","e","setState","email","target","value","onPasswordChange","password","onSubmit","preventDefault","handleSubmit","state","catch","err","message","doSignInWithEmailAndPassword","then","response","console","log","uid","JSON","parse","stringify","user","database","ref","child","once","snapshot","result","val","userFound","render","padding","display","alignItems","height","backgroundColor","borderRadius"],"mappings":"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","sourcesContent":["import React from 'react';\nimport Avatar from '@material-ui/core/Avatar';\nimport Button from '@material-ui/core/Button';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport TextField from '@material-ui/core/TextField';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined';\nimport Typography from '@material-ui/core/Typography';\nimport Container from '@material-ui/core/Container';\nimport {auth} from '../../firebase'\nimport {Redirect} from 'react-router-dom';\nvar firebase = require(\"firebase\");\nvar sectionStyle = {\n    width: \"100%\",\n    backgroundPosition:\"center\",\n    backgroundRepeat:\"no-repeat\",\n};\n\nclass Login extends React.Component{\n  constructor(){\n      super()\n      this.state={\n        email:'',\n        password:'',\n        err: '',\n        userFound: false\n      }\n  }\n    \n  onEmailChange = e => {\n    this.setState({ email: e.target.value });\n  };\n\n  onPasswordChange = e => {\n    this.setState({ password: e.target.value });\n  };\n\n  onSubmit = e => {\n    e.preventDefault();\n    this.handleSubmit({\n      email: this.state.email,\n      password: this.state.password,\n    }).catch(err => {\n      this.setState({ err: err.message });\n    });\n  };\n  handleSubmit = ({ email, password }) => {\n    return auth.doSignInWithEmailAndPassword(email, password)\n      .then(response => {\n        console.log('Successful Sign In')\n        const uid = JSON.parse(JSON.stringify(response)).user.uid\n\n        console.log(JSON.parse(JSON.stringify(response)).user);\n        firebase.database().ref().child('users').child(uid).child('profile').once(\"value\").then(snapshot => {\n          const result = snapshot.val()\n          console.log(result)\n          if(result!=='admin'){\n            this.setState({err: \"This account does not have admin priviledges\"})\n          }else{\n            this.setState({userFound: true})\n          }\n        })\n      })\n      .catch(err => {\n        console.log('Failed Sign In', err);\n        this.setState({err: err.message})\n        throw err;\n      })\n  }\n\n\n  render(){\n\n      return(\n          \n          <div style={sectionStyle}>\n            {this.state.userFound?<Redirect  to=\"/home/approved\" />:null}\n            <Container style={{padding: 10,}} component=\"main\" maxWidth=\"xs\">\n            <CssBaseline />\n            <div style={{display: 'flex', alignItems:'center', height: '100vh'}}>\n              <form  noValidate onSubmit={this.onSubmit} style={{backgroundColor:'rgba(247, 247, 247, 0.8)',borderRadius: \"25px\", padding: \"20px\"}} >\n                  <div style={{ alignItems:'center'}}>\n                  <Avatar >\n                      <LockOutlinedIcon />\n                  </Avatar>\n                  <Typography component=\"h1\" variant=\"h5\">\n                      Sign in\n                  </Typography>\n                  </div>\n                    <TextField\n                      variant=\"outlined\"\n                      margin=\"normal\"\n                      required\n                      fullWidth\n                      id=\"email\"\n                      label=\"Email Address\"\n                      name=\"email\"\n                      autoComplete=\"email\"\n                      autoFocus\n                      value={this.state.email}\n                    onChange={this.onEmailChange}\n                    />\n                    <Typography color='error' variant=\"caption\" display=\"block\" gutterBottom>\n                      {this.state.err}\n                    </Typography>\n                    <TextField\n                      variant=\"outlined\"\n                      margin=\"normal\"\n                      required\n                      fullWidth\n                      name=\"password\"\n                      label=\"Password\"\n                      type=\"password\"\n                      id=\"password\"\n                      autoComplete=\"current-password\"\n                      value={this.state.password}\n                      onChange={this.onPasswordChange}\n                      />\n                    <FormControlLabel\n                      control={<Checkbox value=\"remember\" color=\"primary\" />}\n                      label=\"Remember me\"\n                    />\n                    <Button\n                      type=\"submit\"\n                      variant=\"contained\"\n                      color=\"primary\"\n                    >\n                      Sign In\n                    </Button>\n                  </form>\n                </div>\n            \n              </Container>\n        </div>\n      )\n  }\n}\nexport default Login"]},"metadata":{},"sourceType":"module"}