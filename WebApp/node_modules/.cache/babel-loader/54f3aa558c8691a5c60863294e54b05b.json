{"ast":null,"code":"var _jsxFileName = \"/home/asitha/Documents/Mobile Apps/park/WebApp/src/containers/login/LoginPage.js\";\nimport React from \"react\";\nimport Button from \"@material-ui/core/Button\";\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\nimport TextField from \"@material-ui/core/TextField\";\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\nimport Checkbox from \"@material-ui/core/Checkbox\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Container from \"@material-ui/core/Container\";\nimport { auth } from \"../../firebase\";\n\nvar firebase = require(\"firebase\");\n\nvar sectionStyle = {\n  width: \"100%\",\n  backgroundPosition: \"center\",\n  backgroundRepeat: \"no-repeat\"\n};\n\nclass Login extends React.Component {\n  constructor() {\n    super();\n\n    this.onEmailChange = e => {\n      this.setState({\n        email: e.target.value\n      });\n    };\n\n    this.onPasswordChange = e => {\n      this.setState({\n        password: e.target.value\n      });\n    };\n\n    this.onSubmit = e => {\n      e.preventDefault();\n      this.handleSubmit({\n        email: this.state.email,\n        password: this.state.password\n      }).catch(err => {\n        this.setState({\n          err: err.message\n        });\n      });\n    };\n\n    this.handleSubmit = ({\n      email,\n      password\n    }) => {\n      this.setState({\n        loading: true\n      });\n      return auth.doSignInWithEmailAndPassword(email, password).then(response => {\n        console.log(\"Successful Sign In\");\n        const uid = JSON.parse(JSON.stringify(response)).user.uid;\n        console.log(JSON.parse(JSON.stringify(response)).user);\n        firebase.database().ref().child(\"users\").child(uid).child(\"profile\").once(\"value\").then(snapshot => {\n          const result = snapshot.val();\n          console.log(result);\n\n          if (result !== \"admin\") {\n            this.setState({\n              err: \"This account does not have admin priviledges\",\n              loading: false\n            });\n          } else {\n            this.props.history.push(\"/home/approved\");\n          }\n        });\n      }).catch(err => {\n        console.log(\"Failed Sign In\", err);\n        this.setState({\n          err: err.message,\n          loading: false\n        });\n        throw err;\n      });\n    };\n\n    this.state = {\n      email: \"\",\n      password: \"\",\n      err: \"\",\n      loading: false\n    };\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      style: sectionStyle,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }, React.createElement(Container, {\n      style: {\n        padding: 10\n      },\n      component: \"main\",\n      maxWidth: \"xs\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }, React.createElement(CssBaseline, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      style: {\n        display: \"flex\",\n        alignItems: \"center\",\n        height: \"100vh\",\n        color: 'white'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      noValidate: true,\n      onSubmit: this.onSubmit,\n      style: {\n        backgroundColor: \"#014421\",\n        borderRadius: \"25px\",\n        padding: \"20px\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      style: {\n        textAlign: \"center\",\n        marginBottom: \"20px\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      alt: \"logo\",\n      width: \"80\",\n      height: \"80\",\n      style: {\n        borderRadius: 10\n      },\n      src: require(\"../../images/logo.png\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    }), React.createElement(Typography, {\n      component: \"h1\",\n      variant: \"h4\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }, \"Sign in\")), React.createElement(TextField, {\n      variant: \"outlined\",\n      margin: \"normal\",\n      required: true,\n      fullWidth: true,\n      id: \"email\",\n      label: \"Email Address\",\n      name: \"email\",\n      autoComplete: \"email\",\n      autoFocus: true,\n      value: this.state.email,\n      onChange: this.onEmailChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }), React.createElement(Typography, {\n      color: \"error\",\n      variant: \"caption\",\n      display: \"block\",\n      gutterBottom: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }, this.state.err), React.createElement(TextField, {\n      variant: \"outlined\",\n      margin: \"normal\",\n      required: true,\n      fullWidth: true,\n      name: \"password\",\n      label: \"Password\",\n      type: \"password\",\n      id: \"password\",\n      autoComplete: \"current-password\",\n      value: this.state.password,\n      onChange: this.onPasswordChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }), React.createElement(FormControlLabel, {\n      control: React.createElement(Checkbox, {\n        value: \"remember\",\n        color: \"primary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146\n        },\n        __self: this\n      }),\n      label: \"Remember me\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145\n      },\n      __self: this\n    }), React.createElement(Button, {\n      type: \"submit\",\n      variant: \"contained\",\n      color: \"primary\",\n      fullWidth: true,\n      disabled: this.state.loading,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149\n      },\n      __self: this\n    }, \"Sign In\")))));\n  }\n\n}\n\nexport default Login;","map":{"version":3,"sources":["/home/asitha/Documents/Mobile Apps/park/WebApp/src/containers/login/LoginPage.js"],"names":["React","Button","CssBaseline","TextField","FormControlLabel","Checkbox","Typography","Container","auth","firebase","require","sectionStyle","width","backgroundPosition","backgroundRepeat","Login","Component","constructor","onEmailChange","e","setState","email","target","value","onPasswordChange","password","onSubmit","preventDefault","handleSubmit","state","catch","err","message","loading","doSignInWithEmailAndPassword","then","response","console","log","uid","JSON","parse","stringify","user","database","ref","child","once","snapshot","result","val","props","history","push","render","padding","display","alignItems","height","color","backgroundColor","borderRadius","textAlign","marginBottom"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport Button from \"@material-ui/core/Button\";\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\nimport TextField from \"@material-ui/core/TextField\";\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\nimport Checkbox from \"@material-ui/core/Checkbox\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Container from \"@material-ui/core/Container\";\nimport { auth } from \"../../firebase\";\n\nvar firebase = require(\"firebase\");\nvar sectionStyle = {\n  width: \"100%\",\n  backgroundPosition: \"center\",\n  backgroundRepeat: \"no-repeat\",\n};\n\nclass Login extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      email: \"\",\n      password: \"\",\n      err: \"\",\n      loading: false\n    };\n  }\n\n  onEmailChange = e => {\n    this.setState({ email: e.target.value });\n  };\n\n  onPasswordChange = e => {\n    this.setState({ password: e.target.value });\n  };\n\n  onSubmit = e => {\n    e.preventDefault();\n    this.handleSubmit({\n      email: this.state.email,\n      password: this.state.password\n    }).catch(err => {\n      this.setState({ err: err.message });\n    });\n  };\n  handleSubmit = ({ email, password }) => {\n    this.setState({ loading: true });\n    return auth\n      .doSignInWithEmailAndPassword(email, password)\n      .then(response => {\n        console.log(\"Successful Sign In\");\n        const uid = JSON.parse(JSON.stringify(response)).user.uid;\n\n        console.log(JSON.parse(JSON.stringify(response)).user);\n        firebase\n          .database()\n          .ref()\n          .child(\"users\")\n          .child(uid)\n          .child(\"profile\")\n          .once(\"value\")\n          .then(snapshot => {\n            const result = snapshot.val();\n            console.log(result);\n            if (result !== \"admin\") {\n              this.setState({\n                err: \"This account does not have admin priviledges\",\n                loading: false\n              });\n            } else {\n              this.props.history.push(\"/home/approved\");\n            }\n          });\n      })\n      .catch(err => {\n        console.log(\"Failed Sign In\", err);\n        this.setState({ err: err.message, loading: false });\n        throw err;\n      });\n  };\n\n  render() {\n    return (\n      <div style={sectionStyle}>\n        <Container style={{ padding: 10 }} component=\"main\" maxWidth=\"xs\">\n          <CssBaseline />\n          <div\n            style={{ display: \"flex\", alignItems: \"center\", height: \"100vh\", color: 'white' }}\n          >\n            <form\n              noValidate\n              onSubmit={this.onSubmit}\n              style={{\n                backgroundColor: \"#014421\",\n                borderRadius: \"25px\",\n                padding: \"20px\"\n              }}\n            >\n              <div style={{ textAlign: \"center\", marginBottom: \"20px\" }}>\n                <img\n                  alt=\"logo\"\n                  width=\"80\"\n                  height=\"80\"\n                  style={{borderRadius: 10}}\n                  src={require(\"../../images/logo.png\")}\n                />\n                <Typography component=\"h1\" variant=\"h4\">\n                  Sign in\n                </Typography>\n              </div>\n              <TextField\n                variant=\"outlined\"\n                margin=\"normal\"\n                required\n                fullWidth\n                id=\"email\"\n                label=\"Email Address\"\n                name=\"email\"\n                autoComplete=\"email\"\n                autoFocus\n                value={this.state.email}\n                onChange={this.onEmailChange}\n              />\n              <Typography\n                color=\"error\"\n                variant=\"caption\"\n                display=\"block\"\n                gutterBottom\n              >\n                {this.state.err}\n              </Typography>\n              <TextField\n                variant=\"outlined\"\n                margin=\"normal\"\n                required\n                fullWidth\n                name=\"password\"\n                label=\"Password\"\n                type=\"password\"\n                id=\"password\"\n                autoComplete=\"current-password\"\n                value={this.state.password}\n                onChange={this.onPasswordChange}\n              />\n              <FormControlLabel\n                control={<Checkbox value=\"remember\" color=\"primary\" />}\n                label=\"Remember me\"\n              />\n              <Button\n                type=\"submit\"\n                variant=\"contained\"\n                color=\"primary\"\n                fullWidth\n                disabled={this.state.loading}\n              >\n                Sign In\n              </Button>\n            </form>\n          </div>\n        </Container>\n      </div>\n    );\n  }\n}\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}