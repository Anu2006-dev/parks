{"ast":null,"code":"import _classCallCheck from\"/home/asitha/Documents/Mobile Apps/elly/WebApp/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/asitha/Documents/Mobile Apps/elly/WebApp/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/home/asitha/Documents/Mobile Apps/elly/WebApp/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/home/asitha/Documents/Mobile Apps/elly/WebApp/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/home/asitha/Documents/Mobile Apps/elly/WebApp/node_modules/@babel/runtime/helpers/esm/inherits\";import React from\"react\";import Button from\"@material-ui/core/Button\";import CssBaseline from\"@material-ui/core/CssBaseline\";import TextField from\"@material-ui/core/TextField\";import FormControlLabel from\"@material-ui/core/FormControlLabel\";import Checkbox from\"@material-ui/core/Checkbox\";import Typography from\"@material-ui/core/Typography\";import Container from\"@material-ui/core/Container\";import{auth}from\"../../firebase\";var firebase=require(\"firebase\");var sectionStyle={width:\"100%\",backgroundPosition:\"center\",backgroundRepeat:\"no-repeat\"};var Login=/*#__PURE__*/function(_React$Component){_inherits(Login,_React$Component);function Login(){var _this;_classCallCheck(this,Login);_this=_possibleConstructorReturn(this,_getPrototypeOf(Login).call(this));_this.onEmailChange=function(e){_this.setState({email:e.target.value});};_this.onPasswordChange=function(e){_this.setState({password:e.target.value});};_this.onSubmit=function(e){e.preventDefault();_this.handleSubmit({email:_this.state.email,password:_this.state.password}).catch(function(err){_this.setState({err:err.message});});};_this.handleSubmit=function(_ref){var email=_ref.email,password=_ref.password;_this.setState({loading:true});return auth.doSignInWithEmailAndPassword(email,password).then(function(response){console.log(\"Successful Sign In\");var uid=JSON.parse(JSON.stringify(response)).user.uid;console.log(JSON.parse(JSON.stringify(response)).user);firebase.database().ref().child(\"users\").child(uid).child(\"profile\").once(\"value\").then(function(snapshot){var result=snapshot.val();console.log(result);if(result!==\"admin\"){_this.setState({err:\"This account does not have admin priviledges\",loading:false});}else{_this.props.history.push(\"/home/approved\");}});}).catch(function(err){console.log(\"Failed Sign In\",err);_this.setState({err:err.message,loading:false});throw err;});};_this.state={email:\"\",password:\"\",err:\"\",loading:false};return _this;}_createClass(Login,[{key:\"render\",value:function render(){return React.createElement(\"div\",{style:sectionStyle},React.createElement(Container,{style:{padding:10},component:\"main\",maxWidth:\"xs\"},React.createElement(CssBaseline,null),React.createElement(\"div\",{style:{display:\"flex\",alignItems:\"center\",height:\"100vh\"}},React.createElement(\"form\",{noValidate:true,onSubmit:this.onSubmit,style:{backgroundColor:\"rgba(247, 247, 247, 0.8)\",borderRadius:\"25px\",padding:\"20px\"}},React.createElement(\"div\",{style:{textAlign:\"center\",marginBottom:\"20px\"}},React.createElement(Typography,{component:\"h1\",variant:\"h4\"},\"Sign in\")),React.createElement(TextField,{variant:\"outlined\",margin:\"normal\",required:true,fullWidth:true,id:\"email\",label:\"Email Address\",name:\"email\",autoComplete:\"email\",autoFocus:true,value:this.state.email,onChange:this.onEmailChange}),React.createElement(Typography,{color:\"error\",variant:\"caption\",display:\"block\",gutterBottom:true},this.state.err),React.createElement(TextField,{variant:\"outlined\",margin:\"normal\",required:true,fullWidth:true,name:\"password\",label:\"Password\",type:\"password\",id:\"password\",autoComplete:\"current-password\",value:this.state.password,onChange:this.onPasswordChange}),React.createElement(FormControlLabel,{control:React.createElement(Checkbox,{value:\"remember\",color:\"primary\"}),label:\"Remember me\"}),React.createElement(Button,{type:\"submit\",variant:\"contained\",color:\"primary\",fullWidth:true,disabled:this.state.loading},\"Sign In\")))));}}]);return Login;}(React.Component);export default Login;","map":{"version":3,"sources":["/home/asitha/Documents/Mobile Apps/elly/WebApp/src/containers/login/LoginPage.js"],"names":["React","Button","CssBaseline","TextField","FormControlLabel","Checkbox","Typography","Container","auth","firebase","require","sectionStyle","width","backgroundPosition","backgroundRepeat","Login","onEmailChange","e","setState","email","target","value","onPasswordChange","password","onSubmit","preventDefault","handleSubmit","state","catch","err","message","loading","doSignInWithEmailAndPassword","then","response","console","log","uid","JSON","parse","stringify","user","database","ref","child","once","snapshot","result","val","props","history","push","padding","display","alignItems","height","backgroundColor","borderRadius","textAlign","marginBottom","Component"],"mappings":"mpBAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,MAAP,KAAmB,0BAAnB,CACA,MAAOC,CAAAA,WAAP,KAAwB,+BAAxB,CACA,MAAOC,CAAAA,SAAP,KAAsB,6BAAtB,CACA,MAAOC,CAAAA,gBAAP,KAA6B,oCAA7B,CACA,MAAOC,CAAAA,QAAP,KAAqB,4BAArB,CACA,MAAOC,CAAAA,UAAP,KAAuB,8BAAvB,CACA,MAAOC,CAAAA,SAAP,KAAsB,6BAAtB,CACA,OAASC,IAAT,KAAqB,gBAArB,CAEA,GAAIC,CAAAA,QAAQ,CAAGC,OAAO,CAAC,UAAD,CAAtB,CACA,GAAIC,CAAAA,YAAY,CAAG,CACjBC,KAAK,CAAE,MADU,CAEjBC,kBAAkB,CAAE,QAFH,CAGjBC,gBAAgB,CAAE,WAHD,CAAnB,C,GAMMC,CAAAA,K,2EACJ,gBAAc,uCACZ,yEADY,MAUdC,aAVc,CAUE,SAAAC,CAAC,CAAI,CACnB,MAAKC,QAAL,CAAc,CAAEC,KAAK,CAAEF,CAAC,CAACG,MAAF,CAASC,KAAlB,CAAd,EACD,CAZa,OAcdC,gBAdc,CAcK,SAAAL,CAAC,CAAI,CACtB,MAAKC,QAAL,CAAc,CAAEK,QAAQ,CAAEN,CAAC,CAACG,MAAF,CAASC,KAArB,CAAd,EACD,CAhBa,OAkBdG,QAlBc,CAkBH,SAAAP,CAAC,CAAI,CACdA,CAAC,CAACQ,cAAF,GACA,MAAKC,YAAL,CAAkB,CAChBP,KAAK,CAAE,MAAKQ,KAAL,CAAWR,KADF,CAEhBI,QAAQ,CAAE,MAAKI,KAAL,CAAWJ,QAFL,CAAlB,EAGGK,KAHH,CAGS,SAAAC,GAAG,CAAI,CACd,MAAKX,QAAL,CAAc,CAAEW,GAAG,CAAEA,GAAG,CAACC,OAAX,CAAd,EACD,CALD,EAMD,CA1Ba,OA2BdJ,YA3Bc,CA2BC,cAAyB,IAAtBP,CAAAA,KAAsB,MAAtBA,KAAsB,CAAfI,QAAe,MAAfA,QAAe,CACtC,MAAKL,QAAL,CAAc,CAAEa,OAAO,CAAE,IAAX,CAAd,EACA,MAAOvB,CAAAA,IAAI,CACRwB,4BADI,CACyBb,KADzB,CACgCI,QADhC,EAEJU,IAFI,CAEC,SAAAC,QAAQ,CAAI,CAChBC,OAAO,CAACC,GAAR,CAAY,oBAAZ,EACA,GAAMC,CAAAA,GAAG,CAAGC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,SAAL,CAAeN,QAAf,CAAX,EAAqCO,IAArC,CAA0CJ,GAAtD,CAEAF,OAAO,CAACC,GAAR,CAAYE,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,SAAL,CAAeN,QAAf,CAAX,EAAqCO,IAAjD,EACAhC,QAAQ,CACLiC,QADH,GAEGC,GAFH,GAGGC,KAHH,CAGS,OAHT,EAIGA,KAJH,CAISP,GAJT,EAKGO,KALH,CAKS,SALT,EAMGC,IANH,CAMQ,OANR,EAOGZ,IAPH,CAOQ,SAAAa,QAAQ,CAAI,CAChB,GAAMC,CAAAA,MAAM,CAAGD,QAAQ,CAACE,GAAT,EAAf,CACAb,OAAO,CAACC,GAAR,CAAYW,MAAZ,EACA,GAAIA,MAAM,GAAK,OAAf,CAAwB,CACtB,MAAK7B,QAAL,CAAc,CACZW,GAAG,CAAE,8CADO,CAEZE,OAAO,CAAE,KAFG,CAAd,EAID,CALD,IAKO,CACL,MAAKkB,KAAL,CAAWC,OAAX,CAAmBC,IAAnB,CAAwB,gBAAxB,EACD,CACF,CAlBH,EAmBD,CA1BI,EA2BJvB,KA3BI,CA2BE,SAAAC,GAAG,CAAI,CACZM,OAAO,CAACC,GAAR,CAAY,gBAAZ,CAA8BP,GAA9B,EACA,MAAKX,QAAL,CAAc,CAAEW,GAAG,CAAEA,GAAG,CAACC,OAAX,CAAoBC,OAAO,CAAE,KAA7B,CAAd,EACA,KAAMF,CAAAA,GAAN,CACD,CA/BI,CAAP,CAgCD,CA7Da,CAEZ,MAAKF,KAAL,CAAa,CACXR,KAAK,CAAE,EADI,CAEXI,QAAQ,CAAE,EAFC,CAGXM,GAAG,CAAE,EAHM,CAIXE,OAAO,CAAE,KAJE,CAAb,CAFY,aAQb,C,yDAuDQ,CACP,MACE,4BAAK,KAAK,CAAEpB,YAAZ,EACE,oBAAC,SAAD,EAAW,KAAK,CAAE,CAAEyC,OAAO,CAAE,EAAX,CAAlB,CAAmC,SAAS,CAAC,MAA7C,CAAoD,QAAQ,CAAC,IAA7D,EACE,oBAAC,WAAD,MADF,CAEE,2BACE,KAAK,CAAE,CAAEC,OAAO,CAAE,MAAX,CAAmBC,UAAU,CAAE,QAA/B,CAAyCC,MAAM,CAAE,OAAjD,CADT,EAGE,4BACE,UAAU,KADZ,CAEE,QAAQ,CAAE,KAAK/B,QAFjB,CAGE,KAAK,CAAE,CACLgC,eAAe,CAAE,0BADZ,CAELC,YAAY,CAAE,MAFT,CAGLL,OAAO,CAAE,MAHJ,CAHT,EASE,2BAAK,KAAK,CAAE,CAAEM,SAAS,CAAE,QAAb,CAAuBC,YAAY,CAAE,MAArC,CAAZ,EACE,oBAAC,UAAD,EAAY,SAAS,CAAC,IAAtB,CAA2B,OAAO,CAAC,IAAnC,YADF,CATF,CAcE,oBAAC,SAAD,EACE,OAAO,CAAC,UADV,CAEE,MAAM,CAAC,QAFT,CAGE,QAAQ,KAHV,CAIE,SAAS,KAJX,CAKE,EAAE,CAAC,OALL,CAME,KAAK,CAAC,eANR,CAOE,IAAI,CAAC,OAPP,CAQE,YAAY,CAAC,OARf,CASE,SAAS,KATX,CAUE,KAAK,CAAE,KAAKhC,KAAL,CAAWR,KAVpB,CAWE,QAAQ,CAAE,KAAKH,aAXjB,EAdF,CA2BE,oBAAC,UAAD,EACE,KAAK,CAAC,OADR,CAEE,OAAO,CAAC,SAFV,CAGE,OAAO,CAAC,OAHV,CAIE,YAAY,KAJd,EAMG,KAAKW,KAAL,CAAWE,GANd,CA3BF,CAmCE,oBAAC,SAAD,EACE,OAAO,CAAC,UADV,CAEE,MAAM,CAAC,QAFT,CAGE,QAAQ,KAHV,CAIE,SAAS,KAJX,CAKE,IAAI,CAAC,UALP,CAME,KAAK,CAAC,UANR,CAOE,IAAI,CAAC,UAPP,CAQE,EAAE,CAAC,UARL,CASE,YAAY,CAAC,kBATf,CAUE,KAAK,CAAE,KAAKF,KAAL,CAAWJ,QAVpB,CAWE,QAAQ,CAAE,KAAKD,gBAXjB,EAnCF,CAgDE,oBAAC,gBAAD,EACE,OAAO,CAAE,oBAAC,QAAD,EAAU,KAAK,CAAC,UAAhB,CAA2B,KAAK,CAAC,SAAjC,EADX,CAEE,KAAK,CAAC,aAFR,EAhDF,CAoDE,oBAAC,MAAD,EACE,IAAI,CAAC,QADP,CAEE,OAAO,CAAC,WAFV,CAGE,KAAK,CAAC,SAHR,CAIE,SAAS,KAJX,CAKE,QAAQ,CAAE,KAAKK,KAAL,CAAWI,OALvB,YApDF,CAHF,CAFF,CADF,CADF,CAyED,C,mBA1IiB/B,KAAK,CAAC4D,S,EA4I1B,cAAe7C,CAAAA,KAAf","sourcesContent":["import React from \"react\";\nimport Button from \"@material-ui/core/Button\";\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\nimport TextField from \"@material-ui/core/TextField\";\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\nimport Checkbox from \"@material-ui/core/Checkbox\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Container from \"@material-ui/core/Container\";\nimport { auth } from \"../../firebase\";\n\nvar firebase = require(\"firebase\");\nvar sectionStyle = {\n  width: \"100%\",\n  backgroundPosition: \"center\",\n  backgroundRepeat: \"no-repeat\"\n};\n\nclass Login extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      email: \"\",\n      password: \"\",\n      err: \"\",\n      loading: false\n    };\n  }\n\n  onEmailChange = e => {\n    this.setState({ email: e.target.value });\n  };\n\n  onPasswordChange = e => {\n    this.setState({ password: e.target.value });\n  };\n\n  onSubmit = e => {\n    e.preventDefault();\n    this.handleSubmit({\n      email: this.state.email,\n      password: this.state.password\n    }).catch(err => {\n      this.setState({ err: err.message });\n    });\n  };\n  handleSubmit = ({ email, password }) => {\n    this.setState({ loading: true });\n    return auth\n      .doSignInWithEmailAndPassword(email, password)\n      .then(response => {\n        console.log(\"Successful Sign In\");\n        const uid = JSON.parse(JSON.stringify(response)).user.uid;\n\n        console.log(JSON.parse(JSON.stringify(response)).user);\n        firebase\n          .database()\n          .ref()\n          .child(\"users\")\n          .child(uid)\n          .child(\"profile\")\n          .once(\"value\")\n          .then(snapshot => {\n            const result = snapshot.val();\n            console.log(result);\n            if (result !== \"admin\") {\n              this.setState({\n                err: \"This account does not have admin priviledges\",\n                loading: false\n              });\n            } else {\n              this.props.history.push(\"/home/approved\");\n            }\n          });\n      })\n      .catch(err => {\n        console.log(\"Failed Sign In\", err);\n        this.setState({ err: err.message, loading: false });\n        throw err;\n      });\n  };\n\n  render() {\n    return (\n      <div style={sectionStyle}>\n        <Container style={{ padding: 10 }} component=\"main\" maxWidth=\"xs\">\n          <CssBaseline />\n          <div\n            style={{ display: \"flex\", alignItems: \"center\", height: \"100vh\" }}\n          >\n            <form\n              noValidate\n              onSubmit={this.onSubmit}\n              style={{\n                backgroundColor: \"rgba(247, 247, 247, 0.8)\",\n                borderRadius: \"25px\",\n                padding: \"20px\"\n              }}\n            >\n              <div style={{ textAlign: \"center\", marginBottom: \"20px\" }}>\n                <Typography component=\"h1\" variant=\"h4\">\n                  Sign in\n                </Typography>\n              </div>\n              <TextField\n                variant=\"outlined\"\n                margin=\"normal\"\n                required\n                fullWidth\n                id=\"email\"\n                label=\"Email Address\"\n                name=\"email\"\n                autoComplete=\"email\"\n                autoFocus\n                value={this.state.email}\n                onChange={this.onEmailChange}\n              />\n              <Typography\n                color=\"error\"\n                variant=\"caption\"\n                display=\"block\"\n                gutterBottom\n              >\n                {this.state.err}\n              </Typography>\n              <TextField\n                variant=\"outlined\"\n                margin=\"normal\"\n                required\n                fullWidth\n                name=\"password\"\n                label=\"Password\"\n                type=\"password\"\n                id=\"password\"\n                autoComplete=\"current-password\"\n                value={this.state.password}\n                onChange={this.onPasswordChange}\n              />\n              <FormControlLabel\n                control={<Checkbox value=\"remember\" color=\"primary\" />}\n                label=\"Remember me\"\n              />\n              <Button\n                type=\"submit\"\n                variant=\"contained\"\n                color=\"primary\"\n                fullWidth\n                disabled={this.state.loading}\n              >\n                Sign In\n              </Button>\n            </form>\n          </div>\n        </Container>\n      </div>\n    );\n  }\n}\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}