{"ast":null,"code":"import _slicedToArray from \"/home/asitha/Documents/Mobile Apps/elly/WebApp/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/asitha/Documents/Mobile Apps/elly/WebApp/src/components/header/Header.js\";\nimport React from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport AppBar from \"@material-ui/core/AppBar\";\nimport Toolbar from \"@material-ui/core/Toolbar\";\nimport Typography from \"@material-ui/core/Typography\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport AccountCircleIcon from \"@material-ui/icons/AccountCircle\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Menu from \"@material-ui/core/Menu\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport Button from \"@material-ui/core/Button\";\nimport { auth } from \"../../firebase\";\nimport Swal from \"sweetalert2\";\nimport Grid from \"@material-ui/core/Grid\";\nconst useStyles = makeStyles(theme => ({\n  menuButton: {\n    marginRight: theme.spacing(2)\n  },\n  title: {\n    flexGrow: 1,\n    marginLeft: 5\n  },\n  appBar: {\n    zIndex: theme.zIndex.drawer + 1,\n    backgroundColor: \"green\"\n  },\n  avatar: {\n    resizeMode: \"stretch\",\n    width: 50,\n    height: 50\n  }\n}));\nexport const Header = () => {\n  const classes = useStyles();\n\n  const _React$useState = React.useState(null),\n        _React$useState2 = _slicedToArray(_React$useState, 2),\n        anchorEl = _React$useState2[0],\n        setAnchorEl = _React$useState2[1];\n\n  const _React$useState3 = React.useState(false),\n        _React$useState4 = _slicedToArray(_React$useState3, 2),\n        open = _React$useState4[0],\n        setOpen = _React$useState4[1];\n\n  const _React$useState5 = React.useState(false),\n        _React$useState6 = _slicedToArray(_React$useState5, 2),\n        openAbout = _React$useState6[0],\n        setOpenAbout = _React$useState6[1];\n\n  const _React$useState7 = React.useState(false),\n        _React$useState8 = _slicedToArray(_React$useState7, 2),\n        oldPwdErr = _React$useState8[0],\n        setOldPwdErr = _React$useState8[1];\n\n  const _React$useState9 = React.useState(false),\n        _React$useState10 = _slicedToArray(_React$useState9, 2),\n        newPwdErr = _React$useState10[0],\n        setNewPwdErr = _React$useState10[1];\n\n  const _React$useState11 = React.useState(false),\n        _React$useState12 = _slicedToArray(_React$useState11, 2),\n        confirmPwdErr = _React$useState12[0],\n        setConfirmPwdErr = _React$useState12[1];\n\n  const _React$useState13 = React.useState(\"\"),\n        _React$useState14 = _slicedToArray(_React$useState13, 2),\n        oldPwd = _React$useState14[0],\n        setOldPwd = _React$useState14[1];\n\n  const _React$useState15 = React.useState(\"\"),\n        _React$useState16 = _slicedToArray(_React$useState15, 2),\n        newPwd = _React$useState16[0],\n        setNewPwd = _React$useState16[1];\n\n  const _React$useState17 = React.useState(\"\"),\n        _React$useState18 = _slicedToArray(_React$useState17, 2),\n        confirmPwd = _React$useState18[0],\n        setConfirmPwd = _React$useState18[1];\n\n  const passwordPattern = /^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@_#$%^&*])(?=.{8,})/;\n\n  const checkOldPassword = async () => {\n    // console.log(auth.currentUser().email)\n    try {\n      let response = await auth.doSignInWithEmailAndPassword(auth.currentUser().email, oldPwd);\n      let user = JSON.parse(JSON.stringify(response)).user; // console.log(JSON.parse(JSON.stringify(response)).user)\n\n      if (user !== null) {\n        // console.log(\"Valid\")\n        setOldPwdErr(false);\n        return true;\n      } // console.log(user)\n\n    } catch (err) {\n      console.log(err);\n      setOldPwdErr(true);\n      return false;\n    }\n  };\n\n  const validPassword = () => {\n    if (newPwd.match(passwordPattern)) {\n      setNewPwdErr(false);\n      return true;\n    }\n\n    setNewPwdErr(true);\n    return false;\n  };\n\n  const passwordsMatch = () => {\n    if (confirmPwd.match(newPwd)) {\n      setConfirmPwdErr(false);\n      return true;\n    }\n\n    setConfirmPwdErr(true);\n    return false;\n  };\n\n  const handleOldPwd = text => {\n    // console.log(text.target.value)\n    setOldPwd(text.target.value);\n  };\n\n  const handleNewPwd = text => {\n    // console.log(text.target.value)\n    setNewPwd(text.target.value);\n  };\n\n  const handleConfirmPwd = text => {\n    // console.log(text.target.value)\n    setConfirmPwd(text.target.value);\n  };\n\n  const handleCloseDialog = () => {\n    setOpen(false);\n  };\n\n  const handleClickOpenDialog = () => {\n    setOpen(true);\n  };\n\n  const handleClick = event => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n\n  const changePassword = async () => {\n    if (checkOldPassword() && validPassword() && passwordsMatch()) {\n      try {\n        await auth.updatePassword(newPwd);\n        handleCloseDialog();\n        Swal.fire(\"Suucessfull!\", \"Your password has been updated.\", \"success\"); // console.log(JSON.stringify(response))\n      } catch (err) {\n        console.log(err);\n      }\n    }\n  };\n\n  const handleClickOpenAboutDialog = () => {\n    setOpenAbout(true);\n  };\n\n  const handleCloseAboutDialog = () => {\n    setOpenAbout(false);\n  };\n\n  const signOut = e => {\n    if (e && e.preventDefault) {\n      e.preventDefault();\n    }\n\n    return auth.doSignOut().then(response => {\n      console.log(\"successfully signed out\", response);\n    }).catch(err => {\n      console.log(\"failed to sign out\", err);\n    });\n  };\n\n  return React.createElement(AppBar, {\n    position: \"fixed\",\n    className: classes.appBar,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157\n    },\n    __self: this\n  }, React.createElement(Toolbar, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158\n    },\n    __self: this\n  }, React.createElement(\"img\", {\n    alt: \"logo\",\n    className: classes.avatar,\n    src: require(\"../../images/logo.png\"),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159\n    },\n    __self: this\n  }), React.createElement(Typography, {\n    className: classes.title,\n    variant: \"button\",\n    display: \"block\",\n    gutterBottom: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164\n    },\n    __self: this\n  }, \"Elly - Admin\"), React.createElement(Menu, {\n    id: \"simple-menu\",\n    anchorEl: anchorEl,\n    keepMounted: true,\n    open: Boolean(anchorEl),\n    onClose: handleClose,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172\n    },\n    __self: this\n  }, React.createElement(MenuItem, {\n    onClick: handleClickOpenDialog,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179\n    },\n    __self: this\n  }, \"Password Reset\"), React.createElement(MenuItem, {\n    onClick: signOut,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180\n    },\n    __self: this\n  }, \"Logout\"), React.createElement(MenuItem, {\n    onClick: handleClickOpenAboutDialog,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181\n    },\n    __self: this\n  }, \"About\")), React.createElement(IconButton, {\n    \"aria-controls\": \"simple-menu\",\n    \"aria-haspopup\": \"true\",\n    onClick: handleClick,\n    style: {\n      backgroundColor: \"white\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183\n    },\n    __self: this\n  }, React.createElement(AccountCircleIcon, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189\n    },\n    __self: this\n  })), React.createElement(Dialog, {\n    onClose: handleCloseDialog,\n    \"aria-labelledby\": \"simple-dialog-title\",\n    open: open,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191\n    },\n    __self: this\n  }, React.createElement(DialogTitle, {\n    id: \"simple-dialog-title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196\n    },\n    __self: this\n  }, \"Reset Password\"), React.createElement(TextField, {\n    type: \"password\",\n    helperText: oldPwdErr ? \"Old password is wrong\" : \"\",\n    error: oldPwdErr,\n    onChange: text => handleOldPwd(text),\n    value: oldPwd,\n    style: {\n      margin: 10,\n      width: 500\n    },\n    id: \"outlined-basic\",\n    variant: \"outlined\",\n    label: \"Old Password\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197\n    },\n    __self: this\n  }), React.createElement(TextField, {\n    type: \"password\",\n    helperText: newPwdErr ? \"Password should contain minimum 8 characters with at least one uppercase, one lowercase and one special charcter(!@_#$%^&*).\" : \"\",\n    error: newPwdErr,\n    onChange: text => handleNewPwd(text),\n    value: newPwd,\n    style: {\n      margin: 10,\n      width: 500\n    },\n    id: \"outlined-basic\",\n    variant: \"outlined\",\n    label: \"New Password\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208\n    },\n    __self: this\n  }), React.createElement(TextField, {\n    type: \"password\",\n    helperText: confirmPwdErr ? \"Passwords does not match\" : \"\",\n    error: confirmPwdErr,\n    onChange: text => handleConfirmPwd(text),\n    value: confirmPwd,\n    style: {\n      margin: 10,\n      width: 500\n    },\n    id: \"outlined-basic\",\n    variant: \"outlined\",\n    label: \"Confirm Password\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 223\n    },\n    __self: this\n  }), React.createElement(Button, {\n    style: {\n      margin: 10,\n      width: 500\n    },\n    onClick: changePassword,\n    variant: \"contained\",\n    color: \"primary\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 234\n    },\n    __self: this\n  }, \"RESET\")), React.createElement(Dialog, {\n    onClose: handleCloseAboutDialog,\n    \"aria-labelledby\": \"simple-dialog-title\",\n    open: openAbout,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 243\n    },\n    __self: this\n  }, React.createElement(DialogTitle, {\n    id: \"simple-dialog-title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 248\n    },\n    __self: this\n  }, \"About Elly\"), React.createElement(Grid, {\n    direction: \"column\",\n    alignItems: \"center\",\n    justify: \"center\",\n    container: true,\n    spacing: 1,\n    style: {\n      marginTop: 10\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 249\n    },\n    __self: this\n  }, React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 257\n    },\n    __self: this\n  }, React.createElement(\"img\", {\n    width: \"100\",\n    height: \"100\",\n    src: require(\"../../images/logo2.png\"),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 258\n    },\n    __self: this\n  })), React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 264\n    },\n    __self: this\n  }, \"Developed By\"), React.createElement(Grid, {\n    direction: \"row\",\n    item: true,\n    xs: 12,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 267\n    },\n    __self: this\n  }, React.createElement(\"img\", {\n    width: \"150\",\n    height: \"100\",\n    src: require(\"../../images/score.jpg\"),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 268\n    },\n    __self: this\n  }), \"&\", React.createElement(\"img\", {\n    width: \"100\",\n    height: \"100\",\n    src: require(\"../../images/trunks2.png\"),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 274\n    },\n    __self: this\n  })), React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 280\n    },\n    __self: this\n  }, \"This app is developed by ScoreLab origanization with the collaboration of Trunks & Leaves organization for elephant conservation purposes.\"), React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 285\n    },\n    __self: this\n  }, \"For more information contact us:\", \" \", React.createElement(\"a\", {\n    href: \"https://mail.google.com\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 287\n    },\n    __self: this\n  }, \"elly@scorelab.org\")), React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 289\n    },\n    __self: this\n  }, React.createElement(\"a\", {\n    href: \"http://www.scorelab.org/\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 290\n    },\n    __self: this\n  }, \"Visits http://www.scorelab.org/\")), React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 294\n    },\n    __self: this\n  }, React.createElement(\"a\", {\n    href: \"http://www.trunksnleaves.org/index.html\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 295\n    },\n    __self: this\n  }, \"Visits http://www.trunksnleaves.org\"))))));\n};","map":{"version":3,"sources":["/home/asitha/Documents/Mobile Apps/elly/WebApp/src/components/header/Header.js"],"names":["React","makeStyles","AppBar","Toolbar","Typography","DialogTitle","Dialog","IconButton","AccountCircleIcon","TextField","Menu","MenuItem","Button","auth","Swal","Grid","useStyles","theme","menuButton","marginRight","spacing","title","flexGrow","marginLeft","appBar","zIndex","drawer","backgroundColor","avatar","resizeMode","width","height","Header","classes","useState","anchorEl","setAnchorEl","open","setOpen","openAbout","setOpenAbout","oldPwdErr","setOldPwdErr","newPwdErr","setNewPwdErr","confirmPwdErr","setConfirmPwdErr","oldPwd","setOldPwd","newPwd","setNewPwd","confirmPwd","setConfirmPwd","passwordPattern","checkOldPassword","response","doSignInWithEmailAndPassword","currentUser","email","user","JSON","parse","stringify","err","console","log","validPassword","match","passwordsMatch","handleOldPwd","text","target","value","handleNewPwd","handleConfirmPwd","handleCloseDialog","handleClickOpenDialog","handleClick","event","currentTarget","handleClose","changePassword","updatePassword","fire","handleClickOpenAboutDialog","handleCloseAboutDialog","signOut","e","preventDefault","doSignOut","then","catch","require","Boolean","margin","marginTop"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport AppBar from \"@material-ui/core/AppBar\";\nimport Toolbar from \"@material-ui/core/Toolbar\";\nimport Typography from \"@material-ui/core/Typography\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport AccountCircleIcon from \"@material-ui/icons/AccountCircle\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Menu from \"@material-ui/core/Menu\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport Button from \"@material-ui/core/Button\";\nimport { auth } from \"../../firebase\";\nimport Swal from \"sweetalert2\";\nimport Grid from \"@material-ui/core/Grid\";\n\nconst useStyles = makeStyles(theme => ({\n  menuButton: {\n    marginRight: theme.spacing(2)\n  },\n  title: {\n    flexGrow: 1,\n    marginLeft: 5\n  },\n  appBar: {\n    zIndex: theme.zIndex.drawer + 1,\n    backgroundColor: \"green\"\n  },\n  avatar: {\n    resizeMode: \"stretch\",\n    width: 50,\n    height: 50\n  }\n}));\n\nexport const Header = () => {\n  const classes = useStyles();\n  const [anchorEl, setAnchorEl] = React.useState(null);\n  const [open, setOpen] = React.useState(false);\n  const [openAbout, setOpenAbout] = React.useState(false);\n  const [oldPwdErr, setOldPwdErr] = React.useState(false);\n  const [newPwdErr, setNewPwdErr] = React.useState(false);\n  const [confirmPwdErr, setConfirmPwdErr] = React.useState(false);\n  const [oldPwd, setOldPwd] = React.useState(\"\");\n  const [newPwd, setNewPwd] = React.useState(\"\");\n  const [confirmPwd, setConfirmPwd] = React.useState(\"\");\n  const passwordPattern = /^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@_#$%^&*])(?=.{8,})/;\n\n  const checkOldPassword = async () => {\n    // console.log(auth.currentUser().email)\n    try {\n      let response = await auth.doSignInWithEmailAndPassword(\n        auth.currentUser().email,\n        oldPwd\n      );\n      let user = JSON.parse(JSON.stringify(response)).user;\n      // console.log(JSON.parse(JSON.stringify(response)).user)\n      if (user !== null) {\n        // console.log(\"Valid\")\n        setOldPwdErr(false);\n        return true;\n      }\n      // console.log(user)\n    } catch (err) {\n      console.log(err);\n      setOldPwdErr(true);\n      return false;\n    }\n  };\n\n  const validPassword = () => {\n    if (newPwd.match(passwordPattern)) {\n      setNewPwdErr(false);\n      return true;\n    }\n    setNewPwdErr(true);\n    return false;\n  };\n\n  const passwordsMatch = () => {\n    if (confirmPwd.match(newPwd)) {\n      setConfirmPwdErr(false);\n      return true;\n    }\n    setConfirmPwdErr(true);\n    return false;\n  };\n\n  const handleOldPwd = text => {\n    // console.log(text.target.value)\n    setOldPwd(text.target.value);\n  };\n\n  const handleNewPwd = text => {\n    // console.log(text.target.value)\n    setNewPwd(text.target.value);\n  };\n\n  const handleConfirmPwd = text => {\n    // console.log(text.target.value)\n    setConfirmPwd(text.target.value);\n  };\n\n  const handleCloseDialog = () => {\n    setOpen(false);\n  };\n\n  const handleClickOpenDialog = () => {\n    setOpen(true);\n  };\n\n  const handleClick = event => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n\n  const changePassword = async () => {\n    if (checkOldPassword() && validPassword() && passwordsMatch()) {\n      try {\n        await auth.updatePassword(newPwd);\n        handleCloseDialog();\n        Swal.fire(\"Suucessfull!\", \"Your password has been updated.\", \"success\");\n        // console.log(JSON.stringify(response))\n      } catch (err) {\n        console.log(err);\n      }\n    }\n  };\n\n  const handleClickOpenAboutDialog = () => {\n    setOpenAbout(true);\n  };\n\n  const handleCloseAboutDialog = () => {\n    setOpenAbout(false);\n  };\n\n  const signOut = e => {\n    if (e && e.preventDefault) {\n      e.preventDefault();\n    }\n\n    return auth\n      .doSignOut()\n      .then(response => {\n        console.log(\"successfully signed out\", response);\n      })\n      .catch(err => {\n        console.log(\"failed to sign out\", err);\n      });\n  };\n  return (\n    <AppBar position=\"fixed\" className={classes.appBar}>\n      <Toolbar>\n        <img\n          alt=\"logo\"\n          className={classes.avatar}\n          src={require(\"../../images/logo.png\")}\n        />\n        <Typography\n          className={classes.title}\n          variant=\"button\"\n          display=\"block\"\n          gutterBottom\n        >\n          Elly - Admin\n        </Typography>\n        <Menu\n          id=\"simple-menu\"\n          anchorEl={anchorEl}\n          keepMounted\n          open={Boolean(anchorEl)}\n          onClose={handleClose}\n        >\n          <MenuItem onClick={handleClickOpenDialog}>Password Reset</MenuItem>\n          <MenuItem onClick={signOut}>Logout</MenuItem>\n          <MenuItem onClick={handleClickOpenAboutDialog}>About</MenuItem>\n        </Menu>\n        <IconButton\n          aria-controls=\"simple-menu\"\n          aria-haspopup=\"true\"\n          onClick={handleClick}\n          style={{ backgroundColor: \"white\" }}\n        >\n          <AccountCircleIcon />\n        </IconButton>\n        <Dialog\n          onClose={handleCloseDialog}\n          aria-labelledby=\"simple-dialog-title\"\n          open={open}\n        >\n          <DialogTitle id=\"simple-dialog-title\">Reset Password</DialogTitle>\n          <TextField\n            type=\"password\"\n            helperText={oldPwdErr ? \"Old password is wrong\" : \"\"}\n            error={oldPwdErr}\n            onChange={text => handleOldPwd(text)}\n            value={oldPwd}\n            style={{ margin: 10, width: 500 }}\n            id=\"outlined-basic\"\n            variant=\"outlined\"\n            label=\"Old Password\"\n          />\n          <TextField\n            type=\"password\"\n            helperText={\n              newPwdErr\n                ? \"Password should contain minimum 8 characters with at least one uppercase, one lowercase and one special charcter(!@_#$%^&*).\"\n                : \"\"\n            }\n            error={newPwdErr}\n            onChange={text => handleNewPwd(text)}\n            value={newPwd}\n            style={{ margin: 10, width: 500 }}\n            id=\"outlined-basic\"\n            variant=\"outlined\"\n            label=\"New Password\"\n          />\n          <TextField\n            type=\"password\"\n            helperText={confirmPwdErr ? \"Passwords does not match\" : \"\"}\n            error={confirmPwdErr}\n            onChange={text => handleConfirmPwd(text)}\n            value={confirmPwd}\n            style={{ margin: 10, width: 500 }}\n            id=\"outlined-basic\"\n            variant=\"outlined\"\n            label=\"Confirm Password\"\n          />\n          <Button\n            style={{ margin: 10, width: 500 }}\n            onClick={changePassword}\n            variant=\"contained\"\n            color=\"primary\"\n          >\n            RESET\n          </Button>\n        </Dialog>\n        <Dialog\n          onClose={handleCloseAboutDialog}\n          aria-labelledby=\"simple-dialog-title\"\n          open={openAbout}\n        >\n          <DialogTitle id=\"simple-dialog-title\">About Elly</DialogTitle>\n          <Grid\n            direction=\"column\"\n            alignItems=\"center\"\n            justify=\"center\"\n            container\n            spacing={1}\n            style={{ marginTop: 10 }}\n          >\n            <Grid item xs={12}>\n              <img\n                width=\"100\"\n                height=\"100\"\n                src={require(\"../../images/logo2.png\")}\n              />\n            </Grid>\n            <Grid item xs={12}>\n              Developed By\n            </Grid>\n            <Grid direction=\"row\" item xs={12}>\n              <img\n                width=\"150\"\n                height=\"100\"\n                src={require(\"../../images/score.jpg\")}\n              />\n              &\n              <img\n                width=\"100\"\n                height=\"100\"\n                src={require(\"../../images/trunks2.png\")}\n              />\n            </Grid>\n            <Grid item xs={12}>\n              This app is developed by ScoreLab origanization with the\n              collaboration of Trunks & Leaves organization for elephant\n              conservation purposes.\n            </Grid>\n            <Grid item xs={12}>\n              For more information contact us:{\" \"}\n              <a href=\"https://mail.google.com\">elly@scorelab.org</a>\n            </Grid>\n            <Grid item xs={12}>\n              <a href=\"http://www.scorelab.org/\">\n                Visits http://www.scorelab.org/\n              </a>\n            </Grid>\n            <Grid item xs={12}>\n              <a href=\"http://www.trunksnleaves.org/index.html\">\n                Visits http://www.trunksnleaves.org\n              </a>\n            </Grid>\n          </Grid>\n        </Dialog>\n      </Toolbar>\n    </AppBar>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}